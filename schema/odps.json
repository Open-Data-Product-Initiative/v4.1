{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ODPS schema",
  "description": "This is the schema for ODPS v4.1.",
  "type": "object",
  "properties": {
    "schema": {
      "type": "string",
      "description": "Defines the URL of Schema. Used often for validation purposes.",
      "format": "uri"
    },
    "version": {
      "type": "string",
      "description": "Current ODPS version.",
      "examples": ["v4.1", "dev"]
    },
    "product": {
      "type": "object",
      "properties": {
        "details": {
          "type": "object",
          "description": "Root element to tie all together.",
          "properties": {
            "name": { "type": "string" },
            "productID": { "type": "string" },
            "visibility": {
              "type": "string",
              "enum": [
                "private",
                "invitation",
                "organisation",
                "dataspace",
                "public"
              ]
            },
            "status": {
              "type": "string",
              "enum": [
                "announcement",
                "draft",
                "development",
                "testing",
                "acceptance",
                "production",
                "sunset",
                "retired"
              ]
            },
            "type": { "type": "string" },
            "created": { "type": "string", "format": "date" },
            "updated": { "type": "string", "format": "date" },
            "valueProposition": { "type": "string", "maxLength": 512 },
            "description": { "type": "string" },
            "productSeries": { "type": "string" },
            "categories": { "type": "array" },
            "standards": { "type": "array" },
            "tags": { "type": "array" },
            "productVersion": { "type": "string" },
            "versionNotes": { "type": "string" },
            "issues": { "type": "string" },
            "contentSample": { "type": "string", "format": "uri" },
            "logoURL": { "type": "string", "format": "uri" },
            "outputFileFormats": { "type": "array" },
            "brandSlogan": { "type": "string" },
            "useCases": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "useCase": {
                    "type": "object",
                    "properties": {
                      "useCaseTitle": { "type": "string" },
                      "useCaseDescription": { "type": "string" },
                      "useCaseURL": { "type": "string", "format": "uri" }
                    }
                  }
                }
              }
            },
            "recommendedDataProducts": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "required": ["name", "productID", "visibility", "status", "type"]
        },
        "contract": {
          "type": "object",
          "$ref": "#/$defs/Contract"
        },
        "SLA": {
          "type": "object",
          "$ref": "#/$defs/Sla"
        },
        "dataQuality": {
          "type": "object",
          "$ref": "#/$defs/DataQuality"
        },
        "pricingPlans": {
          "type": "object",
          "$ref": "#/$defs/PricingPlans"
        },
        "license": {
          "type": "object",
          "$ref": "#/$defs/License"
        },
        "dataAccess": {
          "type": "object",
          "$ref": "#/$defs/DataAccess"
        },
        "dataHolder": {
          "type": "object",
          "$ref": "#/$defs/DataHolder"
        },
        "paymentGateways": {
          "type": "object",
          "$ref": "#/$defs/PaymentGateway"
        },

        "productStrategy": {
          "type": "object",
          "description": "Connects the data product to business objectives and KPIs.",
          "properties": {
            "objectives": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "en": { "type": "string" }
                }
              }
            },
            "strategicAlignment": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "en": { "type": "string" }
                }
              }
            },
            "contributesToKPI": {
              "type": "object",
              "required": ["id", "name", "unit", "target"],
              "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "description": { "type": "string" },
                "unit": { "type": "string" },
                "target": { "type": ["number", "string"] },
                "direction": {
                  "type": "string",
                  "enum": [
                    "increase",
                    "decrease",
                    "at_least",
                    "at_most",
                    "equals"
                  ]
                },
                "timeframe": { "type": "string" }
              }
            },
            "productKPIs": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["id", "name", "unit", "target"],
                "properties": {
                  "id": { "type": "string" },
                  "name": { "type": "string" },
                  "description": { "type": "string" },
                  "unit": { "type": "string" },
                  "target": { "type": ["number", "string"] },
                  "direction": {
                    "type": "string",
                    "enum": [
                      "increase",
                      "decrease",
                      "at_least",
                      "at_most",
                      "equals"
                    ]
                  },
                  "frequency": { "type": "string" },
                  "owner": { "type": "string" },
                  "calculation": { "type": "string" }
                }
              }
            },
            "relatedKPIs": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["id", "name", "unit", "target"],
                "properties": {
                  "id": { "type": "string" },
                  "name": { "type": "string" },
                  "unit": { "type": "string" },
                  "target": { "type": ["number", "string"] },
                  "direction": {
                    "type": "string",
                    "enum": [
                      "increase",
                      "decrease",
                      "at_least",
                      "at_most",
                      "equals"
                    ]
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "required": ["schema", "version", "product"],
  "additionalProperties": false,
  "$defs": {
    "Contract": { "...": {} },
    "Sla": { "...": {} },
    "DataQuality": { "...": {} },
    "DataAccess": { "...": {} },
    "PaymentGateway": { "...": {} },
    "PricingPlans": { "...": {} },
    "SlaDefinition": { "...": {} },
    "DQDefinition": { "...": {} },
    "SLADimension": { "...": {} },
    "DQDimension": { "...": {} },
    "PricingPlan": { "...": {} },
    "License": { "...": {} },
    "DataAccessItem": { "...": {} },
    "DataHolder": { "...": {} },
    "PaymentGateways": { "...": {} }
  }
}
